<mvc:View
    controllerName="tradelog.domain.carteira.VisualizaCarteira"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
    >
    <Toolbar>
        <Title level="H1" text="{i18n>carteira.valorLiquido}:" />
        <Title level="H1" text="{path:'ValorLiquido', formatter:'.formatter.formataValor'}" />
        <ToolbarSpacer />
        <Button type="Accept"
            icon="sap-icon://sys-add" text="{i18n>carteira.adicionaFundos}"
            press="dialogAddFunds" />
            <Button type="Reject"
            icon="sap-icon://sys-minus" text="{i18n>carteira.removeFundos}"
            press="dialogRemoveFunds" />
    </Toolbar>

    <Panel expandable="true" expanded="true" headerText="{i18n>carteira.tituloPosicoes}">
    <Table id="tablePosicao" items="{Posicao}" growing="false">
        <columns>
        <Column width="5rem"><Text text="{i18n>posicao.nomePapel}"   /></Column>
            <Column width="5rem"><Text text="{i18n>posicao.dataEntrada}"   /></Column>
            <Column ><Text text="{i18n>posicao.precoEntrada}"   /></Column>
            <Column ><Text text="{i18n>posicao.precoAtual}"   /></Column>
            <Column ><Text text="{i18n>posicao.quantidade}"   /></Column>
            <Column ><Text text="{i18n>posicao.valorStopAtual}"   /></Column>
            <Column ><Text text="{i18n>posicao.valorAtual}"   /></Column>
            <Column ><Text text="{i18n>posicao.percDif}"   /></Column>
            <Column ><Text text="{i18n>posicao.valorDif}"   /></Column>

            <Column ><Text text="{i18n>posicao.diasPosicao}"   /></Column>

        </columns>
        <items>
        <ColumnListItem type="Navigation" press="onClickPosicao" app:IdPosicao="{IdPosicao}">
                <cells>

                    <Text text="{CodigoPapel}" />
                    <Text text="{path:'DataEntrada', formatter:'.formatter.formataData'}" />
                    <Text text="{path:'PrecoEntrada', formatter:'.formatter.formataValor'}" />
                    <Text text="{path:'PrecoAtual', formatter:'.formatter.formataValor'}" />
                    <Text text="{Quantidade}" />
                    <Text text="{path:'PrecoStopAtual', formatter:'.formatter.formataValor'}" />
                    <Text text="{parts:[{path:'PrecoAtual'},{path:'Quantidade'}], formatter:'.formataCalculoPreco'}" />
                    <Text text="{parts:[{path:'PrecoAtual'},{path:'Quantidade'},{path:'PrecoEntrada'}], formatter:'.formataCalculoPercDif'}" />
                    <Text text="{parts:[{path:'PrecoAtual'},{path:'Quantidade'},{path:'PrecoEntrada'}], formatter:'.formataCalculoValorDif'}" />
                    <Text text="{path:'DataEntrada', formatter:'.formatter.calcDifDays'}" />

                </cells>
            </ColumnListItem>
        </items>
    </Table>
    </Panel>

    <Panel id="detalhePosicao" expandable="true" expanded="true" headerText="{i18n>posicao.detalhePosicao} - {CodigoPapel}" visible="{viewModel>/posicaoSelected}">
        <Panel id="conteudoPosicao">
        <mvc:XMLView viewName="tradelog.domain.posicao.fragments.DetalhePosicao"
                                app:nomePainel="DetalhePosicao" app:domainAtual="posicao" app:entidade="{viewModel>/bindPath}" app:paramEntidade="posicao" ></mvc:XMLView>
            <!--<core:Fragment fragmentName="tradelog.domain.posicao.fragments.DetalhePosicaoDisplay" type="XML" />-->
        </Panel>
    </Panel>

</mvc:View>